(function(a){a.quickAPI=function(b){var b=b||{args:{method:"quickapi.test"}},c={type:b.type||"POST",async:b.sync===true?false:b.async===false?false:true,timeout:b.timeout||window.AJAX_TIMEOUT||3000,url:b.url||"/api/",data:{jsonData:a.toJSON(b.args||{method:"quickapi.test"}),language:b.language||window.LANGUAGE_CODE,},dataType:"json",},f=b.callback||function(h,g,i){},e=b.handlerShowAlert||window.handlerShowAlert||function(i,h,g){alert(i);if(g){return g()}return null},d=a.ajax(c).fail(function(k,h,i){if(k.getResponseHeader("Location")){var g=k.getResponseHeader("Location").replace(/\/[#-\w]*$/,"/?").replace(/\?.*$/,"?next="+window.location.pathname);window.location.replace(g);console.log("REDIRECT:"+k.getResponseHeader("Location"))}else{console.log("ERROR:"+k.responseText);if(k.responseText){var j=(k.responseText.length<=255)?k.responseText:k.responseText.substring(0,255)+"...";e(j,"alert-danger")}}}).done(function(i,h,j){if(b.log&&window.DEBUG){console.log(b.log)}if((i.status>=300)&&(i.status<400)&&(i.data.Location!=undefined)){var g=i.data.Location.replace(/\/[#-\w]*$/,"/?").replace(/\?.*$/,"?next="+window.location.pathname),k=function(){window.location.replace(g)};console.log("REDIRECT:"+g);if(i.message){e(i.message,"alert-danger",k)}else{k()}}else{if(i.status>=400){e(i.message,"alert-danger")}else{if(window.DEBUG){console.log(a.toJSON(i.message));if(b.args.method=="quickapi.test"){o=new Object;a.extend(true,o,i.data);console.log(o)}}return f(i,h,j)}}});return d}}(jQuery));